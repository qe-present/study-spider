<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T8-字体反爬</title>
</head>
<body>
<div class="numbers-grid" id="numbersGrid">
</div>
<script>
    function renderNumbers(_0x3bd5f) {
        const _0x2ba44a = document['getElementById']('numbersGrid');
        _0x2ba44a['innerHTML'] = _0x3bd5f['map']((_0x27a712, _0x5d9262) => '<div\x20class=\x22number-box\x22\x20style=\x22animation-delay:\x20' + _0x5d9262 * 0.1 + 's\x22>' + _0x27a712 + '</div>')['join']('');
    }
    function loadCustomFont(base64Font) {
        // 移除之前的字体样式（如果存在）
        const existingStyle = document.getElementById('custom-font-style');
        if (existingStyle) {
            existingStyle.remove();
        }
        // 创建新的字体样式
        const style = document.createElement('style');
        style.id = 'custom-font-style';
        style.textContent = `
                @font-face {
                    font-family: 'AntiSpiderFont';
                    src: url(data:font/woff2;base64,${base64Font}) format('woff2');
                    font-weight: normal;
                    font-style: normal;
                }
                
                    .numbers-grid {
                        display: inline-flex;
                        gap: 2px;
                        font-family: 'AntiSpiderFont', monospace;
                    }
                    .number-box {
                        display: inline-block;
                        min-width: 48px;
                        height: 20px;
                        line-height: 20px;
                        text-align: center;
                        font-family: 'AntiSpiderFont', monospace;
                        padding: 0 2px;
                        box-sizing: content-box;
                        background: #fff !important;/* 确保背景变纯白 */
                        color: #000 !important;     /* 确保字体变纯黑 */
                    }

                     .number-item, .number, .data-item {
                     font-family: 'AntiSpiderFont', monospace !important;
                     font-variant-numeric: normal;
                     font-feature-settings: normal;
                 }
                 .numbers-grid * {
                     font-family: 'AntiSpiderFont', monospace !important;
                 }
            `;
        document.head.appendChild(style);
    }
</script>
<script type="module">
    import {domToBlob} from './node_modules/modern-screenshot/dist/index.mjs'
    const get_shot = async () => {
        const bytesArr = [];
        const grid = document.getElementById('numbersGrid');
        const boxes = grid.querySelectorAll('.number-box');
        for (const box of boxes) {
            const blob = await domToBlob(box, {scale: 4, type: 'image/png'});
            const buffer = await blob.arrayBuffer();
            const binStr = String.fromCharCode(...new Uint8Array(buffer));
            bytesArr.push(binStr);          // 字符串可以被 JSON 序列化
        }
        return bytesArr;
    };
     window.get_shot = get_shot
</script>
</body>
</html>